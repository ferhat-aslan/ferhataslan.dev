---
import type { SiteMeta } from "@/types";

import BaseHead from "@/components/BaseHead.astro";
import SkipLink from "@/components/SkipLink.astro";
import ThemeProvider from "@/components/ThemeProvider.astro";
import Footer from "@/components/layout/Footer.astro";
import Header from "@/components/layout/Header.astro";
import { siteConfig } from "@/site-config";

interface Props {
	meta: SiteMeta;
}

const {
	meta: { articleDate, description = siteConfig.description, ogImage, title },
} = Astro.props;
---

<html lang={siteConfig.lang}>
	<head>
		<!-- Google Tag Manager -->
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != "dataLayer" ? "&l=" + l : "";
				j.async = true;
				j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, "script", "dataLayer", "GTM-PMHLHNWC");
		</script>
		<!-- End Google Tag Manager -->
		<BaseHead articleDate={articleDate} description={description} ogImage={ogImage} title={title} />
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-PMHLHNWC"
				height="0"
				width="0"
				style="display:none;visibility:hidden"></iframe></noscript
		>
		<!-- End Google Tag Manager (noscript) -->
		<div
			id="movingCircle"
			class="z-100 pointer-events-none fixed h-44 w-44 rounded-full bg-blue-300 blur-3xl"
			style=" left: 850px; top: 454px;"
		>
		</div>

		<ThemeProvider />
		<SkipLink />
		<Header />
		<main id="main">
			<slot />
		</main>
		<Footer />
		<script>
			document.addEventListener("DOMContentLoaded", () => {
				// 获取需要移动的圆形元素
				const movingCircle = document.getElementById("movingCircle");

				// 监听鼠标移动事件
				document.addEventListener("mousemove", (event) => {
					// 获取鼠标当前位置
					const mouseX = event.clientX;
					const mouseY = event.clientY;

					// 计算圆形中心位置
					const circleX = mouseX - 88;
					const circleY = mouseY - 88;

					// 将圆形元素移动到鼠标位置
					movingCircle.style.left = circleX + "px";
					movingCircle.style.top = circleY + "px";
				});

				// 监听鼠标移出事件
				document.addEventListener("mouseleave", () => {
					movingCircle.style.opacity = 0; // 鼠标移出时将透明度设为0
				});

				// 监听鼠标移入事件
				document.addEventListener("mouseenter", (event) => {
					movingCircle.style.opacity = 1; // 鼠标移入时将透明度设为1
					// 获取鼠标当前位置
					const mouseX = event.clientX;
					const mouseY = event.clientY;

					// 计算圆形中心位置
					const circleX = mouseX - 88;
					const circleY = mouseY - 88;

					// 将圆形元素移动到鼠标位置
					movingCircle.style.left = circleX + "px";
					movingCircle.style.top = circleY + "px";
				});
			});
		</script>
	</body>
</html>
